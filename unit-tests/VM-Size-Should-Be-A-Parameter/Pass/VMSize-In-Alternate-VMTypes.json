{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "resources": [    
    {
      "apiVersion": "2018-11-19",
      "identity": {
        "type": "SystemAssigned"
      },
      "location": "[parameters('location')]",
      "name": "[concat(parameters('workspaceName'), '/gpu-cluster')]",
      "properties": {
        "computeType": "AmlCompute",
        "computeLocation": "[parameters('location')]",
        "description": "gpu nodes",
        "properties": {
          "remoteLoginPortPublicAccess": "Enabled",
          "scaleSettings": {
            "maxNodeCount": 4,
            "minNodeCount": 0
          },
          "subnet": {
            "id": "[variables('subnet')]"
          },
          "vmSize": "[parameters('VMSize')]"
        }
      },
      "type": "Microsoft.MachineLearningServices/workspaces/computes"
    }
    ]
}

